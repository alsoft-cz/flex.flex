----------------------------------------------------------------------------------------------------
class private ci_cpuspecific =
-- P©eklada‡ Flexu.
-- Procesorovˆ z visl˜ch charakteristiky IA-32 na p©eklada‡.
----------------------------------------------------------------------------------------------------
-- Ondra : 25.03.2002 : Vytvo©il
----------------------------------------------------------------------------------------------------

with
  cc_def.cc_codes,
  cc_def.cc_var,
  cc_base,
  cc_base.cc_sym,
  cp_ia32.ci_abi;

----------------------------------------------------------------------------------------------------
override setstackframe =
-- Nastav¡ typ stackframe procedury.
----------------------------------------------------------------------------------------------------
var
  frame            : istackframe;      -- typ stackframe

begin
  -- nem  ji‘ p©i©azen typ stackframe ?
  if i_get_stackframe^(proc^)<>isf_default then
    ce^.seterror({CCERR=}000388,ce_stackframeset);
    ce^.setparam(sym_get_qid(proc));
    {%%POS}
    ce^.raiseerror;
    end if;

  -- ur‡it typ stackframe
  i_id_to_stackframe(id,frame);
  if frame=isf_default then
    ce^.seterror({CCERR=}000389,ce_i_stackframe);
    ce^.setparam(entityident_to_string(id));
    {%%POS}
    ce^.raiseerror;
    end if;

  -- p©i©adit konvenci
  i_set_stackframe^(proc^,frame);
  end setstackframe;



----------------------------------------------------------------------------------------------------
override p_asm =
-- P©eklad inline assembleru
----------------------------------------------------------------------------------------------------
with
  cb_block,cb_block.cb_def;

use
  ci_asm;

begin
  ci_asm.p_asm^(curr,pblasm(^bl)^);
  end p_asm;         



end ci_cpuspecific;