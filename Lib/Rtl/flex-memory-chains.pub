----------------------------------------------------------------------------------------------------
--module public chains =
-- Flex Run-time Library
-- Memory manager definitions
-- Copyright (C) 1999-2003 A && L soft
----------------------------------------------------------------------------------------------------

class public c_rtl_chain =
    ------------------------------------------------------------------------------------------------
    static lock;
    ------------------------------------------------------------------------------------------------
    static unlock;
    ------------------------------------------------------------------------------------------------
    static add (hdr : in p_rtl_chain_item);
    -- prida pametovy blok do retezu
    ------------------------------------------------------------------------------------------------
    static del (hdr : in p_rtl_chain_item);
    -- oddela pametovy blok ze retezu
    ------------------------------------------------------------------------------------------------
    static add_not_locked (hdr : in p_rtl_chain_item);
    -- prida pametovy blok do retezu
    ------------------------------------------------------------------------------------------------
    static del_not_locked (hdr : in p_rtl_chain_item);
    -- oddela pametovy blok ze retezu
    ------------------------------------------------------------------------------------------------
    static get_next_chain_item(item : in out p_rtl_chain_item);
    ------------------------------------------------------------------------------------------------
    static get_next_chain_item_not_locked(item : in out p_rtl_chain_item);
    ------------------------------------------------------------------------------------------------
    static create_subchain(
    subchain       : in out ref p_rtl_chain);
    -- vytvori podretez
    ------------------------------------------------------------------------------------------------
    static destroy_subchain(
    num            : in t_rtl_native_unsigned;   -- allocation ID
    subchain       : in out p_rtl_chain);        -- subchain
    -- uvolni vsechny v podretezu a vsechny v podpodretezech a odregistruje a odalokuje
    -- !! NEPROVEDOU SE DESTRUKTORY - to je vlastnost
    ------------------------------------------------------------------------------------------------
    static cleanall(
    num            : in t_rtl_native_unsigned);  -- allocation ID
    -- uvolni vsechny v retezu a vsechny v podretezech
    -- !! NEPROVEDOU SE DESTRUKTORY - to je vlastnost
    ------------------------------------------------------------------------------------------------
protected
  var
    first          : p_rtl_chain_item;           --retez pametovych bloku
    firstchain     : p_rtl_chain;                --retez pod-chainu
    parentchain    : p_rtl_chain;                --nad-chain
    nextchain      : p_rtl_chain;                --dalsi v retezu chainu stejne urovne
    prevchain      : p_rtl_chain;                --predchozi v retezu chainu stejne urovne
    ------------------------------------------------------------------------------------------------
    virtual freeitem(
    hdr            : in p_rtl_chain_item;
    num            : in t_rtl_native_unsigned    -- allocation ID
    );
    ------------------------------------------------------------------------------------------------
    end c_rtl_chain;

class public c_rtl_memchain = extend c_rtl_chain;
  end c_rtl_memchain;

--end chains;