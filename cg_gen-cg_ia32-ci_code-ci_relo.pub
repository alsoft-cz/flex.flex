----------------------------------------------------------------------------------------------------
module public ci_relo =
-- P©eklada‡ Flexu.
-- Vyhodnocov n¡ relokac¡.
----------------------------------------------------------------------------------------------------
-- Ondra : 05.04.2002 : Vytvo©il
----------------------------------------------------------------------------------------------------

with
  cx_expr,
  cx_expr.cx_def;

----------------------------------------------------------------------------------------------------
procedure addrelo (
    inst           : in out icodeinst;           -- instance
    _rtype         : in irelotype;               -- typ relokace
    _psym          : in pentity;                 -- souvisej¡c¡ entita
    _pexpr         : in pexpnode;                -- souvisej¡c¡ v˜raz
    _nextip        : in t_unsigned32;            -- IP n sleduj¡c¡ instrukce
    _disp          : in t_unsigned;              -- adresa pole
    _absolute      : in t_logical);              -- T-absolutn¡ adresa
-- Dopln¡ glob ln¡ relokaci.
----------------------------------------------------------------------------------------------------
procedure addunres (
    info           : in out igeninfo;            -- informace o p©ekladu
    target         : in itarget;                 -- ‡¡slo c¡le
    nextip         : in t_unsigned32;            -- IP n sleduj¡c¡ instrukce
    disp           : in t_unsigned;              -- adresa pole
    _len           : in t_unsigned;              -- d‚lka pole
    absolute       : in t_logical);              -- T-absolutn¡ adresa
-- Dopln¡ lok ln¡ relokaci.
----------------------------------------------------------------------------------------------------
procedure newtarget (
    info           : in out igeninfo;            -- informace o p©ekladu
    target         : out itarget);               -- ‡¡slo c¡le
-- Alokuje c¡l skoku.
----------------------------------------------------------------------------------------------------
procedure settarget (
    info           : in igeninfo;                -- informace o p©ekladu
    target         : in itarget;                 -- ‡¡slo c¡le
    addr           : in t_unsigned32);           -- adresa c¡le
-- P©i©ad¡ adresu c¡le skoku.
----------------------------------------------------------------------------------------------------
procedure gettarget (
    info           : in igeninfo;                -- informace o p©ekladu
    target         : in itarget;                 -- ‡¡slo c¡le
    addr           : out t_unsigned32);          -- adresa c¡le
-- Zjist¡ adresu c¡le skoku.
----------------------------------------------------------------------------------------------------
procedure localresolve (
    curr           : in tentity;                 -- generovan˜ prvek
    inst           : in out icodeinst;           -- instance
    info           : in igeninfo);               -- informace o p©ekladu
-- Vyhodnot¡ lok ln¡ relokace.
----------------------------------------------------------------------------------------------------

end ci_relo;