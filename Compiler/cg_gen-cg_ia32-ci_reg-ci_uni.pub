----------------------------------------------------------------------------------------------------
module public ci_uni =
-- P©eklada‡ Flexu.
-- Primitiva pro pr ci s univerz ln¡mi registry.
----------------------------------------------------------------------------------------------------
-- Ondra : 15.04.2003 : Oddˆlil z [cg_gen.cg_ia32.ci_reg.ci_alloc].
----------------------------------------------------------------------------------------------------

----------------------------------------------------------------------------------------------------
procedure i_uni_new_mapping (
    context        : in out iexprcontext;        -- aktu ln¡ kontext v˜razu
    uni            : in iunireg;                 -- registr
    mapping        : out iregnum);               -- jemu odpov¡daj¡c¡ mapov n¡
-- Pro zadan˜ registr najde vhodn‚ mapov n¡.
----------------------------------------------------------------------------------------------------
procedure i_uni_set_mapping (
    context        : in out iexprcontext;        -- aktu ln¡ kontext v˜razu
    mapping        : in iregnum;                 -- mapov n¡
    uni            : in iunireg);                -- jemu odpov¡daj¡c¡ registr
-- P©i©ad¡ mapov n¡ zadan˜ registr.
----------------------------------------------------------------------------------------------------
procedure i_uni_use (
    inst           : in out icodeinst;           -- instance
    info           : in out igeninfo;            -- informace o pr–bˆhu generov n¡
    context        : in out iexprcontext;        -- kontext generov n¡ v˜razu
    uni            : in iunireg;                 -- po‘adovan˜ registr
    mapping        : out iregnum);               -- mapov n¡ registru
-- Alokace konkr‚tn¡ho univerz ln¡ho registru.
-- V OPREG nastav¡ pouze virtu ln¡ ‡¡slo registru.
----------------------------------------------------------------------------------------------------
procedure i_uni_find (
    context        : in iexprcontext;            -- kontext generov n¡ v˜razu
    unireg         : out iunireg;                -- alokovan˜ registr
    size           : in t_unsigned;              -- po‘adovan  velikost registru
    mode           : in iregallocmode;           -- re‘im alokace registru
    freeonly       : in t_logical;               -- pouze voln‚ registry
    exclusion      : in iuniregset);             -- vynechan‚ registry
-- Nalezne voln˜ registr.
----------------------------------------------------------------------------------------------------
procedure i_uni_free (
    info           : in igeninfo;                -- informace o p©ekladu
    context        : in out iexprcontext;        -- kontext generov n¡ v˜razu
    uni            : in iunireg);                -- registr, tak jak je v operandu
-- Uvolnˆn¡ registru.
----------------------------------------------------------------------------------------------------

end ci_uni;
