----------------------------------------------------------------------------------------------------
module public cc_block =
-- V˜stup v˜raz– do XML
----------------------------------------------------------------------------------------------------
-- honzap : 8.12.2003 : Vytvo©il
----------------------------------------------------------------------------------------------------

with
  standard,
  cb_block.cb_def,
  cx_expr.cx_def,
  cc_io.cc_xml_dumper,
  standard.files,           
  standard.streams,
  standard.characters;

-- dop©edn‚ deklarace
class c_block_dumper; type p_block_dumper = ^class c_block_dumper;

----------------------------------------------------------------------------------------------------
class public c_block_dumper = extend c_block_iterator;
-- T©¡da pro dump bloku do XML
-- vlastn¡ dump se spou¨t¡ zdˆdˆnou metodou [traverse_block]
----------------------------------------------------------------------------------------------------

    var
      xml          : p_xml_dumper;               -- v˜stupn¡ xml dumper

    ------------------------------------------------------------------------------------------------
    virtual dump_expr (
        name       : in t_char32ustr;            -- jm‚no obalov‚ho elementu
        expr       : in pexpnode);               -- v˜raz
    -- Akce spou¨tˆn  p©i po‘adavku na dump v˜razu, implicitnˆ je definov na pomoc¡ c_expr_dumper
    ------------------------------------------------------------------------------------------------
        
    ------------------------------------------------------------------------------------------------
    static init (
        xml        : in p_xml_dumper);           -- v˜stupn¡ xml dumper
    -- inicializace
    ------------------------------------------------------------------------------------------------

    end c_block_dumper;

----------------------------------------------------------------------------------------------------
procedure dump_block_to_xml (
    block          : pblnode;                    -- dumpovan˜ blok
    xml            : p_xml_dumper);              -- v˜stupn¡ XML
-- Provede dump v˜razu do XML
----------------------------------------------------------------------------------------------------
procedure dump_block_to_stream (
    block          : pblnode;                    -- dumpovan˜ blok
    stream         : p_text_writer);             -- v˜stupn¡ stream
-- Provede dump v˜razu do textov‚ho streamu
----------------------------------------------------------------------------------------------------
procedure dump_block_to_file (
    block          : pblnode;                    -- dumpovan˜ blok
    file           : t_char32ustr);              -- v˜stupn¡ soubor
-- Provede dump v˜razu do XML souboru
-- je to zkratka m¡sto pou‘it¡ kombinace t©¡d [c_block_dumper] a [c_file_xml_dumper]
----------------------------------------------------------------------------------------------------

end cc_block;
