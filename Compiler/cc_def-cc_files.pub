----------------------------------------------------------------------------------------------------
module public cc_files =
-- P©eklada‡ Flexu.
-- Seznamy soubor–.
----------------------------------------------------------------------------------------------------
-- Ondra : 12.11.2001 : Vytvo©il
----------------------------------------------------------------------------------------------------

with
  standard,
  standard.names,
  standard.common,
  standard.common.structures,
  standard.classes,
  standard.classes.hash_tables;

-- dop©edn‚ deklarace
class abstract c_file_source; type p_file_source = ^class c_file_source;
class c_used_file;            type p_used_file   = ^class c_used_file;
class c_used_files;           type p_used_files  = ^class c_used_files;

type
  -- ‡ st souboru
  t_part           = enum
      part_public;                               -- public (*.pub)
      part_private;                              -- private (*.priv)
      part_all;                                  -- obecn˜ (*.src)
      end enum;

----------------------------------------------------------------------------------------------------
class public abstract c_file_source =
-- Poskytovatel jmen soubor– a jejich input stream–.
----------------------------------------------------------------------------------------------------

    ------------------------------------------------------------------------------------------------
    virtual abstract get_source_file_name (
        base       : in t_char32str;
        part       : in t_part)
        return t_char32str;
    -- Podle zadan˜ch £daj– nalezne pln‚ jm‚no souboru.
    ------------------------------------------------------------------------------------------------
    virtual abstract get_included_file_name (
        base       : in c_name;
        name       : in t_char32str)
        return t_char32str;
    -- Sestav¡ absolutn¡ jm‚no includovan‚ho souboru. Je-li zad no relativn¡ jm‚no, vzt hne ho 
    -- k uveden‚ b zi. Absolutn¡ jm‚no ponech  beze zmˆny.
    ------------------------------------------------------------------------------------------------

    end c_file_source;



----------------------------------------------------------------------------------------------------
class public c_used_file = extend c_hash_table_item;
-- Jm‚no pou‘it‚ho souboru.
----------------------------------------------------------------------------------------------------

    var
      name         : protected p_text_name;      -- ulo‘en‚ jm‚no souboru

    ------------------------------------------------------------------------------------------------
    static init (
        name       : in t_text_name);
    -- Inicializace - p©i©azen¡ jm‚na souboru.
    ------------------------------------------------------------------------------------------------

    end c_used_file;



----------------------------------------------------------------------------------------------------
class public c_used_files = extend c_auto_hash_table;
-- Jm‚no pou‘it‚ho souboru. Hash tabulka se sama vytvo©¡ v entry.
----------------------------------------------------------------------------------------------------

    ------------------------------------------------------------------------------------------------
    static add_file_name (
        name       : in t_text_name;             -- p©id van‚ jm‚no souboru
        id         : out class t_hash_item_id);  -- p©idˆlen‚ identifika‡n¡ ‡¡slo souboru
    -- Do tabulky ulo‘¡ dal¨¡ jm‚no souboru a vr t¡ jeho identifika‡n¡ ‡¡slo.
    ------------------------------------------------------------------------------------------------

    end c_used_files;

end cc_files;
