----------------------------------------------------------------------------------------------------
module public cc_ref =
-- P©eklada‡ Flexu.
-- Reference mezi entitami.
----------------------------------------------------------------------------------------------------
-- Ondra : 25.06.2001 : Vytvo©il
----------------------------------------------------------------------------------------------------

----------------------------------------------------------------------------------------------------
class public ref0 = extend c_flex_class;
-- Reference na objekt
----------------------------------------------------------------------------------------------------

    var
      e            : tentityeval;                -- vyhodnocen¡ reference

    ------------------------------------------------------------------------------------------------
    static geteval return tentityeval;
    -- Zjist¡ £rove¤ vyhodnocen¡ reference.
    ------------------------------------------------------------------------------------------------
    static seteval (
        e          : tentityeval);
    -- Nastav¡ novou £rove¤ vyhodnocen¡ reference.
    ------------------------------------------------------------------------------------------------

    end ref0;



----------------------------------------------------------------------------------------------------
class refexpr; type prefexpr = ^refexpr;
class public refexpr = extend ref0;
-- Reference na objekt: v˜raz
----------------------------------------------------------------------------------------------------

    ------------------------------------------------------------------------------------------------
    static isset return t_logical;
    -- True, je-li reference p©i©azena.
    ------------------------------------------------------------------------------------------------
    static getuexpr return p_flex_construct;
    -- Vr t¡ odkazovan˜ v˜raz. Pokud nen¡ p©i©azen, vr t¡ NIL.
    ------------------------------------------------------------------------------------------------
    static getcexpr return p_flex_construct;
    -- Vr t¡ odkazovan˜ v˜raz. Pokud nen¡ p©i©azen, zp–sob¡ intern¡ chybu.
    ------------------------------------------------------------------------------------------------
    static setexpr (
        x          : in p_flex_construct);
    -- P©i©ad¡ do reference v˜raz.
    ------------------------------------------------------------------------------------------------
    static errpos;
    -- Pozice chyby ve zdroj ku.
    ------------------------------------------------------------------------------------------------

    end refexpr;



----------------------------------------------------------------------------------------------------
class public ref1 = extend ref0;
-- Reference na objekt s v˜razem
----------------------------------------------------------------------------------------------------

    ------------------------------------------------------------------------------------------------
    static getrefexpr return prefexpr;
    -- Vr t¡ odkaz na souvisej¡c¡ v˜raz.
    ------------------------------------------------------------------------------------------------
    static getuexpr return p_flex_construct;
    -- Vr t¡ odkazovan˜ v˜raz. Pokud nen¡ p©i©azen, vr t¡ NIL.
    ------------------------------------------------------------------------------------------------
    static getcexpr return p_flex_construct;
    -- Vr t¡ odkazovan˜ v˜raz. Pokud nen¡ p©i©azen, zp–sob¡ intern¡ chybu.
    ------------------------------------------------------------------------------------------------
    static setexpr (
        x          : in p_flex_construct);
    -- P©i©ad¡ do reference v˜raz.
    ------------------------------------------------------------------------------------------------

  protected

    var
      _x           : prefexpr;                   -- v˜raz

    end ref1;



----------------------------------------------------------------------------------------------------
class public reftype = extend ref1;
-- Reference na objekt: typ
----------------------------------------------------------------------------------------------------

    ------------------------------------------------------------------------------------------------
    static getutype return pentity_type;
    -- Vr t¡ odkazovan˜ typ. Pokud nen¡ p©i©azen, vr t¡ NIL.
    ------------------------------------------------------------------------------------------------
    static getctype return pentity_type;
    -- Vr t¡ odkazovan˜ typ. Pokud nen¡ p©i©azen, zp–sob¡ intern¡ chybu.
    ------------------------------------------------------------------------------------------------
    static settype (
        ptyp       : in pentity_type;
        clear_expr : in t_logical := true);      -- T-zapomenout p©i©azen˜ v˜raz, F-ponechat
    -- P©i©ad¡ do reference typ.
    ------------------------------------------------------------------------------------------------
    static isset return t_logical;
    -- True, je-li reference p©i©azena.
    ------------------------------------------------------------------------------------------------
    static errpos;
    -- Pozice chyby ve zdroj ku.
    ------------------------------------------------------------------------------------------------

    end reftype;



----------------------------------------------------------------------------------------------------
class public refblock = extend ref0;
-- Reference na objekt: blok p©¡kaz–
----------------------------------------------------------------------------------------------------

    ------------------------------------------------------------------------------------------------
    static setblock (
        b          : p_flex_class);
    -- P©i©ad¡ do reference blok.
    ------------------------------------------------------------------------------------------------
    static getublock return p_flex_class;
    -- Vr t¡ odkazovan˜ blok. Pokud nen¡ p©i©azen, vr t¡ NIL.
    ------------------------------------------------------------------------------------------------
    static getcblock return p_flex_class;
    -- Vr t¡ odkazovan˜ blok. Pokud nen¡ p©i©azen, zp–sob¡ intern¡ chybu.
    ------------------------------------------------------------------------------------------------
    static isset return t_logical;
    -- True, je-li reference p©i©azena.
    ------------------------------------------------------------------------------------------------

    end refblock;



----------------------------------------------------------------------------------------------------
class public refentity = extend ref1;
-- Reference na objekt: entita
----------------------------------------------------------------------------------------------------

    ------------------------------------------------------------------------------------------------
    static setentity (
        e          : in pentity);
    -- P©i©ad¡ do reference symbol.
    ------------------------------------------------------------------------------------------------
    static getuentity return pentity;
    -- Vr t¡ odkazovanou entitu. Pokud nen¡ p©i©azena, vr t¡ NIL.
    ------------------------------------------------------------------------------------------------
    static getcentity return pentity;
    -- Vr t¡ odkazovanou entitu. Pokud nen¡ p©i©azena, zp–sob¡ intern¡ chybu.
    ------------------------------------------------------------------------------------------------
    static isset return t_logical;
    -- True, je-li entita p©i©azena.
    ------------------------------------------------------------------------------------------------
    static errpos;
    -- Pozice chyby ve zdroj ku.
    ------------------------------------------------------------------------------------------------

    end refentity;



----------------------------------------------------------------------------------------------------
class public refimm = extend ref1;
-- Reference na objekt: p©¡m  hodnota
----------------------------------------------------------------------------------------------------

    ------------------------------------------------------------------------------------------------
    static getuimm return pimm_value;
    -- Vr t¡ pointer na odkazovanou p©¡mou hodnotu.    
    ------------------------------------------------------------------------------------------------
    static getimm return pimm_value;
    -- Vr t¡ pointer na odkazovanou p©¡mou hodnotu.
    -- Pokud je p©¡m  hodnota typu IC_UNDEF, zp–sob¡ intern¡ chybu.
    ------------------------------------------------------------------------------------------------
    static getundefimm return pimm_value;
    -- Vr t¡ pointer na odkazovanou p©¡mou hodnotu.
    -- Pokud p©¡m  hodnota nen¡ typu IC_UNDEF, zp–sob¡ intern¡ chybu.
    ------------------------------------------------------------------------------------------------
    static isset return t_logical;
    -- True, je-li reference p©i©azena.
    ------------------------------------------------------------------------------------------------
    static errpos;
    -- Pozice chyby ve zdroj ku.
    ------------------------------------------------------------------------------------------------

    end refimm;



end cc_ref;
