----------------------------------------------------------------------------------------------------
module public cb_choice =
-- Překladač Flexu.
-- Optimalizovaný seznam výběrů.
----------------------------------------------------------------------------------------------------
-- Ondra : 25.09.2001 : Vytvořil
----------------------------------------------------------------------------------------------------

type
  -- tabulka optimalizovaných výběrů
  tchoicetable     = string of record
      lval         : tuniint;                    -- dolní mez
      hval         : tuniint;                    -- horní mez
      end record;

  -- seznam optimalizovaných výběrů
  tchoicelist      = record
      list         : ^tchoicetable;              -- seznam výrazů
    --lcount       : t_unsigned;                 -- počet výrazů
    --lsize        : t_unsigned;                 -- alokovaná paměť
      end record;    

----------------------------------------------------------------------------------------------------
procedure choice_extend (    
    clist          : in out tchoicelist;         -- seznam výběrů
    count          : in t_unsigned);             -- počet přidávaných položek
-- Rozšíří CLIST o COUNT položek (pokud je to potřeba).
----------------------------------------------------------------------------------------------------
procedure choice_add_single (
    context        : in tcontext;                -- aktuální kontext
    clist          : in out tchoicelist;         -- seznam výběrů
    ui             : in tuniint;                 -- vkládaná hodnota
    choice         : in pexpnode);               -- související výběr
-- Vloží do seznamu optimalizovaných výběrů jednu hodnotu.
-- Pokud je výběr duplicitní, ohlásí varování.
-- %%X Předělat: Uložit na seznam duplicitních výběrů.
----------------------------------------------------------------------------------------------------
procedure choice_add_range (
    clist          : in out tchoicelist;         -- seznam výběrů
    lval           : in tuniint;                 -- dolní mez
    hval           : in tuniint;                 -- horní mez
    choice         : in pexpnode);               -- související výběr
-- Vloží do seznamu optimalizovaných výběrů rozsah hodnot.
----------------------------------------------------------------------------------------------------

end cb_choice;
