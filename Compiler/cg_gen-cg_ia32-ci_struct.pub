----------------------------------------------------------------------------------------------------
module public ci_struct =
-- P©eklada‡ Flexu.
-- Definice intern¡ch run-time struktur p©eklada‡e.
----------------------------------------------------------------------------------------------------
-- Ondra : 05.04.2002 : Vytvo©il
----------------------------------------------------------------------------------------------------

with
  cp_cpu.cp_32.cp_def;

----- V˜jimky a Return-control frame ---------------------------------------------------------------

----- %%TECH Layout stacku podprogramu -------------------------------------------------------------
-- Detailn¡ popis exception a return-control fram– viz flex-excetions.priv.
----------------------------------------------------------------------------------------------------

type
  -- exception frame
  ixframe          = record
      handler      : tprg32;                     -- pointer na obshulu v˜jimky
      uplink       : tpointer32;                 -- pointer na nad©azen˜ exception-frame (EBP)
      frame_esp    : tdata32;                    -- ESP tohoto r mce
      frame_ebp    : tdata32;                    -- ESP tohoto r mce
      except_base  : tpointer32;                 -- base address on exception stack valid in this frame
      end record
          for alignment use 1
          for size      use 20;

const
  -- offsety polo‘ek exception frame
  ixframe_handler  = timm32(0);

type
  -- return-control frame
  ircframe         = record
      action       : timm32;                     -- k¢d akce
      dest         : tprg32;                     -- adresa c¡lov‚ho n vˆ¨t¡
      end record
          for alignment use 1
          for size      use 8;

const
  -- offsety polo‘ek return-control framu
  ircframe_action  = timm32(0);
  ircframe_dest    = timm32(4);

end ci_struct;
