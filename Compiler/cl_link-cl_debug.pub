----------------------------------------------------------------------------------------------------
module public cl_debug =
-- P©eklada‡ Flexu.
-- Univerz ln¡ linker debug informac¡.
----------------------------------------------------------------------------------------------------
-- Radek : 31.01.2003 : Vytvo©il
----------------------------------------------------------------------------------------------------

with
  standard,
  cl_link.cl_resolver;


type
  -- typ debug informaci, ktere se generuji
  t_debug_information_type = enum
      tdit_codeview;
      end enum;


type
  -- pointer na linker
  p_linkres            = ^linkresolver;


----------------------------------------------------------------------------------------------------
class public t_debug_information = extend c_flex_class;
-- Trida pro zpracovani debug informaci.
----------------------------------------------------------------------------------------------------

    ------------------------------------------------------------------------------------------------
    virtual init;
    -- inicializace objektu
    ------------------------------------------------------------------------------------------------
    virtual linkdebuginfo ( 
        _compi     : in pentity_compile;         -- kompilacni jednotka
        _link      : in p_linkresolver           -- linker
        );
    -- vytvori pracovni strukturu debug informaci
    ------------------------------------------------------------------------------------------------
    virtual generate;
    -- Vygeneruje codeview debug informace.
    ------------------------------------------------------------------------------------------------
    virtual linkimage (
        _buffer  : out p_unsigned8array;          -- pointer na dumpnuta data
        _length  : out t_unsigned32               -- velikost dat v bufferu
        );
    -- prilinkuje debug informace do vysledneho image
    ------------------------------------------------------------------------------------------------
    end t_debug_information;


type
  -- pointer na tridu reprezentujici debug infromace 
  p_debug_information = ^class t_debug_information;


var
  debug_info       : p_debug_information := nil;  -- debug informace
  debug_mode       : t_debug_information_type := tdit_codeview; -- typ generovanych debug informaci



{
----------------------------------------------------------------------------------------------------
procedure debug_information_initialize (
    _type          : in t_debug_information_type -- typ debug informaci
    );
-- inicializace debug informaci
----------------------------------------------------------------------------------------------------
procedure debug_information_link (
    _compi         : in pentity_compile;         -- kompilacni jednotka
    _link          : in p_linkresolver           -- linker
    );
-- vytvori pracovni strukturu debug informaci
----------------------------------------------------------------------------------------------------
procedure debug_information_link_image;
-- prilinkuje debug informace do vysledneho image
----------------------------------------------------------------------------------------------------
}


#if codeview then;
----------------------------------------------------------------------------------------------------
#separate public cl_codeview_types;
-- Gener tor CodeView debug informac¡.
----------------------------------------------------------------------------------------------------
#separate public cl_codeview;
-- Gener tor CodeView debug informac¡.
----------------------------------------------------------------------------------------------------
#end if;

end cl_debug;